<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Xis POA</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  
  <!-- Cloudinary -->
  <script src="https://upload-widget.cloudinary.com/global/all.js"></script>

  <style>
    :root {
      --primary: #ff6b6b;
      --error: #f44336;
      --success: #4caf50;
    }
    
    /* ... (mantenha todos os estilos existentes) ... */

    /* NOVOS ESTILOS PARA O EDITOR */
    .editor-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      padding: 10px;
      background: #f5f5f5;
      border-radius: 8px 8px 0 0;
      border: 1px solid #ddd;
      margin-bottom: -1px;
    }
    
    .editor-toolbar button {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .editor-toolbar button:hover {
      opacity: 0.9;
    }
    
    /* Cores dos botões */
    .btn-bold { background: #333; color: white; }
    .btn-italic { background: #555; color: white; }
    .btn-underline { background: #777; color: white; }
    .btn-strike { background: #999; color: white; }
    .btn-em { background: #007bff; color: white; }
    .btn-mark { background: #ffc107; color: black; }
    .btn-small { background: #6c757d; color: white; }
    .btn-paragraph { background: #17a2b8; color: white; }
    .btn-h2 { background: #28a745; color: white; }
    .btn-h3 { background: #20c997; color: white; }
    .btn-h4 { background: #6f42c1; color: white; }
    .btn-quote { background: #6c757d; color: white; }
    .btn-hr { background: #343a40; color: white; }
    .btn-link { background: #007bff; color: white; }
    .btn-red { background: #dc3545; color: white; }
    .btn-green { background: #28a745; color: white; }
    .btn-yellow { background: #ffc107; color: black; }
    .btn-blue { background: #007bff; color: white; }
    
    /* Área de texto do editor */
    #resenha, #meu-pedido {
      width: 100%;
      min-height: 100px;
      padding: 15px;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <!-- ... (mantenha todo o conteúdo existente até o formulário) ... -->

  <div id="admin-panel" class="hidden">
    <h2>Adicionar Novo Xis</h2>
    <form id="add-location-form">
      <!-- ... (mantenha todos os campos existentes) ... -->
      
      <label for="resenha">Resenha:</label>
      <div class="editor-toolbar">
        <!-- Botões de formatação -->
        <button type="button" class="btn-bold" onclick="formatText('resenha', 'bold')"><b>B</b></button>
        <button type="button" class="btn-italic" onclick="formatText('resenha', 'italic')"><i>I</i></button>
        <button type="button" class="btn-underline" onclick="formatText('resenha', 'underline')"><u>S</u></button>
        <button type="button" class="btn-strike" onclick="formatText('resenha', 'strike')"><s>R</s></button>
        <button type="button" class="btn-em" onclick="formatText('resenha', 'em')"><em>E</em></button>
        <button type="button" class="btn-mark" onclick="formatText('resenha', 'mark')"><mark>M</mark></button>
        <button type="button" class="btn-small" onclick="formatText('resenha', 'small')"><small>Pq</small></button>
        
        <button type="button" class="btn-paragraph" onclick="formatText('resenha', 'p')">[P]</button>
        <button type="button" class="btn-h2" onclick="formatText('resenha', 'h2')">[2]</button>
        <button type="button" class="btn-h3" onclick="formatText('resenha', 'h3')">[3]</button>
        <button type="button" class="btn-h4" onclick="formatText('resenha', 'h4')">[4]</button>
        
        <button type="button" class="btn-quote" onclick="formatText('resenha', 'blockquote')">Cit.</button>
        <button type="button" class="btn-hr" onclick="formatText('resenha', 'hr')">HR</button>
        <button type="button" class="btn-link" onclick="insertLink('resenha')"><i class="fas fa-link"></i></button>
        
        <!-- Botões de cor -->
        <button type="button" class="btn-red" onclick="setColor('resenha', 'red')"><i class="fas fa-font"></i></button>
        <button type="button" class="btn-green" onclick="setColor('resenha', 'green')"><i class="fas fa-font"></i></button>
        <button type="button" class="btn-yellow" onclick="setColor('resenha', 'yellow')"><i class="fas fa-font"></i></button>
        <button type="button" class="btn-blue" onclick="setColor('resenha', 'blue')"><i class="fas fa-font"></i></button>
      </div>
      <textarea id="resenha" rows="5" required></textarea>

      <label for="meu-pedido">Meu Pedido:</label>
      <div class="editor-toolbar">
        <!-- Repetir os mesmos botões para o campo de pedido -->
        <button type="button" class="btn-bold" onclick="formatText('meu-pedido', 'bold')"><b>B</b></button>
        <button type="button" class="btn-italic" onclick="formatText('meu-pedido', 'italic')"><i>I</i></button>
        <!-- ... (todos os outros botões para o segundo editor) ... -->
      </div>
      <textarea id="meu-pedido" rows="2" required placeholder="Ex: Xis Bacon Especial com batata palha extra"></textarea>

      <!-- ... (mantenha o resto do formulário existente) ... -->
    </form>
  </div>

  <!-- ... (mantenha todos os scripts existentes do Firebase) ... -->

  <!-- NOVOS SCRIPTS PARA O EDITOR -->
  <script>
    // Função principal de formatação
    function formatText(textareaId, tag) {
      const textarea = document.getElementById(textareaId);
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const selectedText = textarea.value.substring(start, end);
      let before = textarea.value.substring(0, start);
      let after = textarea.value.substring(end);
      
      // Tags especiais
      const tags = {
        bold: ['<b>', '</b>'],
        italic: ['<i>', '</i>'],
        underline: ['<u>', '</u>'],
        strike: ['<s>', '</s>'],
        em: ['<em>', '</em>'],
        mark: ['<mark>', '</mark>'],
        small: ['<small>', '</small>'],
        p: ['<p>', '</p>'],
        h2: ['<h2>', '</h2>'],
        h3: ['<h3>', '</h3>'],
        h4: ['<h4>', '</h4>'],
        blockquote: ['<blockquote>', '</blockquote>'],
        hr: ['<hr>', '']
      };
      
      if (tag === 'hr') {
        textarea.value = before + tags[tag][0] + after;
        textarea.selectionStart = textarea.selectionEnd = start + 4;
      } else {
        textarea.value = before + tags[tag][0] + selectedText + tags[tag][1] + after;
        textarea.selectionStart = start + tags[tag][0].length;
        textarea.selectionEnd = end + tags[tag][0].length;
      }
      
      textarea.focus();
    }
    
    // Inserir link
    function insertLink(textareaId) {
      const textarea = document.getElementById(textareaId);
      const url = prompt('Digite a URL do link:', 'https://');
      if (url) {
        const text = prompt('Digite o texto do link:', 'Clique aqui');
        formatTextWithCustom(textareaId, `<a href="${url}" target="_blank">`, '</a>', text);
      }
    }
    
    // Definir cor
    function setColor(textareaId, color) {
      const colors = {
        red: '#dc3545',
        green: '#28a745',
        yellow: '#ffc107',
        blue: '#007bff'
      };
      formatTextWithCustom(textareaId, `<span style="color:${colors[color]};">`, '</span>');
    }
    
    // Função auxiliar para formatação personalizada
    function formatTextWithCustom(textareaId, openTag, closeTag, defaultText = null) {
      const textarea = document.getElementById(textareaId);
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      let selectedText = textarea.value.substring(start, end);
      
      if (defaultText && !selectedText) {
        selectedText = defaultText;
      }
      
      textarea.value = 
        textarea.value.substring(0, start) + 
        openTag + selectedText + closeTag + 
        textarea.value.substring(end);
      
      textarea.selectionStart = start + openTag.length;
      textarea.selectionEnd = start + openTag.length + selectedText.length;
      textarea.focus();
    }
  </script>
</body>
</html>
